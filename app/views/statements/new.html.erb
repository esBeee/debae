<% provide(:title, t(".title", default: "Make a new statement")) %>
<% provide(:description, t(".description", default: "")) %>

<% argument_for, is_pro_argument = argument_hash(params[:pro], params[:contra]) %>
<% statement_to_be_backed = argument_for ? Statement.find_by(id: argument_for) : nil %>


<div class="col-xs-12 col-xs-offset-0 col-sm-8 col-sm-offset-2">
  <% if statement_to_be_backed %>
    <div class="row">
      <h2><%= t(".#{is_pro_argument ? "pro" : "contra"}_argument_headline") %></h2>
    </div>
    <%= render 'statement_detailed', statement: statement_to_be_backed, headline_only: true %>
  <% else %>
    <div class="row">
      Formuliere eine Aussage, die sich mit Pro- und Kontra-Argumenten diskutieren lässt.
      <span class="secondary">
        Willst du z.B. die Frage diskutieren, ob sich das Internet langfristig durchsetzen wird, könntest du formulieren <i>"Das Internet wird sich langfristig nicht durchsetzen."</i> Du hast später die Möglichkeit, auch deinen eigenen Aussagen zuzustimmen oder sie abzulehnen.
      </span>
    </div>
  <% end %>

  <div class="row">
    <%= render 'shared/active_record_errors', resource: @statement %>
  </div>

  <div class="row">
    <%= form_for @statement do |f| %>

      <%= hidden_field :argument, :argument_for, value: argument_for %>
      <%= hidden_field :argument, :is_pro_argument, value: is_pro_argument %>
      <%= hidden_field :statement, "[body][original_locale]", value: I18n.locale %>

      <div class="input-group">
        <%= text_area_tag "statement[body][thesis][#{I18n.locale}]", @statement.body == "{}" ? nil : body(@statement), placeholder: t(".body", default: "Your statement"), class: "form-control comment" %><br />
        <span class="input-group-btn">
          <%= button_tag(type: "submit", class: "btn btn-default area-height", id: "new-statement") do %>
            <%= fa_icon("send-o") %><br />
            <%= t(".submit_html", default: "Submit") %>
          <% end %>
        </span>
      </div>
    <% end %>
  </div>
</div>
